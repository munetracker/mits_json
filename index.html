<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Redirecting...</title>
  <script>
    async function redirectUser() {
      const params = new URLSearchParams(window.location.search);
      const key = params.get("to");

      if (!key) {
        document.body.innerText = "Missing 'to' parameter in URL.";
        return;
      }

      try {
        const response = await fetch("https://raw.githubusercontent.com/munetracker/mits_json/master/dts/linkshortener.json");
        const data = await response.json();

        if (data[key] && data[key].url) {
          window.location.href = data[key].url;
        } else {
          document.body.innerText = `No matching redirect for key: ${key}`;
        }
      } catch (error) {
        document.body.innerText = "Failed to fetch redirect data.";
        console.error(error);
      }
    }

    redirectUser();
  </script>
</head>
<body>
  Redirecting...
</body>
</html>
